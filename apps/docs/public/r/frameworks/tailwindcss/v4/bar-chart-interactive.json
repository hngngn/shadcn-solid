{
  "$schema": "https://shadcn-solid.com/schema/registry-item.json",
  "name": "bar-chart-interactive",
  "type": "registry:block",
  "registryDependencies": [
    "card",
    "chart"
  ],
  "files": [
    {
      "path": "src/charts/bar-chart-interactive.tsx",
      "content": "import { For, createMemo, createSignal } from \"solid-js\"\nimport { render } from \"solid-js/web\"\nimport { VisAxis, VisStackedBar, VisTooltip } from \"@unovis/solid\"\nimport { StackedBar } from \"@unovis/ts\"\n\nimport { useIsMobile } from \"@repo/tailwindcss/hooks/use-mobile\"\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@repo/tailwindcss/ui/v4/card\"\nimport {\n  ChartContainer,\n  ChartTooltipContent,\n  type ChartConfig,\n} from \"@repo/tailwindcss/ui/v4/chart\"\n\ninterface DataRecord {\n  date: string\n  desktop: { view: number }\n  mobile: { view: number }\n}\n\nconst data: DataRecord[] = [\n  { date: \"2024-04-01\", desktop: { view: 222 }, mobile: { view: 150 } },\n  { date: \"2024-04-02\", desktop: { view: 97 }, mobile: { view: 180 } },\n  { date: \"2024-04-03\", desktop: { view: 167 }, mobile: { view: 120 } },\n  { date: \"2024-04-04\", desktop: { view: 242 }, mobile: { view: 260 } },\n  { date: \"2024-04-05\", desktop: { view: 373 }, mobile: { view: 290 } },\n  { date: \"2024-04-06\", desktop: { view: 301 }, mobile: { view: 340 } },\n  { date: \"2024-04-07\", desktop: { view: 245 }, mobile: { view: 180 } },\n  { date: \"2024-04-08\", desktop: { view: 409 }, mobile: { view: 320 } },\n  { date: \"2024-04-09\", desktop: { view: 59 }, mobile: { view: 110 } },\n  { date: \"2024-04-10\", desktop: { view: 261 }, mobile: { view: 190 } },\n  { date: \"2024-04-11\", desktop: { view: 327 }, mobile: { view: 350 } },\n  { date: \"2024-04-12\", desktop: { view: 292 }, mobile: { view: 210 } },\n  { date: \"2024-04-13\", desktop: { view: 342 }, mobile: { view: 380 } },\n  { date: \"2024-04-14\", desktop: { view: 137 }, mobile: { view: 220 } },\n  { date: \"2024-04-15\", desktop: { view: 120 }, mobile: { view: 170 } },\n  { date: \"2024-04-16\", desktop: { view: 138 }, mobile: { view: 190 } },\n  { date: \"2024-04-17\", desktop: { view: 446 }, mobile: { view: 360 } },\n  { date: \"2024-04-18\", desktop: { view: 364 }, mobile: { view: 410 } },\n  { date: \"2024-04-19\", desktop: { view: 243 }, mobile: { view: 180 } },\n  { date: \"2024-04-20\", desktop: { view: 89 }, mobile: { view: 150 } },\n  { date: \"2024-04-21\", desktop: { view: 137 }, mobile: { view: 200 } },\n  { date: \"2024-04-22\", desktop: { view: 224 }, mobile: { view: 170 } },\n  { date: \"2024-04-23\", desktop: { view: 138 }, mobile: { view: 230 } },\n  { date: \"2024-04-24\", desktop: { view: 387 }, mobile: { view: 290 } },\n  { date: \"2024-04-25\", desktop: { view: 215 }, mobile: { view: 250 } },\n  { date: \"2024-04-26\", desktop: { view: 75 }, mobile: { view: 130 } },\n  { date: \"2024-04-27\", desktop: { view: 383 }, mobile: { view: 420 } },\n  { date: \"2024-04-28\", desktop: { view: 122 }, mobile: { view: 180 } },\n  { date: \"2024-04-29\", desktop: { view: 315 }, mobile: { view: 240 } },\n  { date: \"2024-04-30\", desktop: { view: 454 }, mobile: { view: 380 } },\n  { date: \"2024-05-01\", desktop: { view: 165 }, mobile: { view: 220 } },\n  { date: \"2024-05-02\", desktop: { view: 293 }, mobile: { view: 310 } },\n  { date: \"2024-05-03\", desktop: { view: 247 }, mobile: { view: 190 } },\n  { date: \"2024-05-04\", desktop: { view: 385 }, mobile: { view: 420 } },\n  { date: \"2024-05-05\", desktop: { view: 481 }, mobile: { view: 390 } },\n  { date: \"2024-05-06\", desktop: { view: 498 }, mobile: { view: 520 } },\n  { date: \"2024-05-07\", desktop: { view: 388 }, mobile: { view: 300 } },\n  { date: \"2024-05-08\", desktop: { view: 149 }, mobile: { view: 210 } },\n  { date: \"2024-05-09\", desktop: { view: 227 }, mobile: { view: 180 } },\n  { date: \"2024-05-10\", desktop: { view: 293 }, mobile: { view: 330 } },\n  { date: \"2024-05-11\", desktop: { view: 335 }, mobile: { view: 270 } },\n  { date: \"2024-05-12\", desktop: { view: 197 }, mobile: { view: 240 } },\n  { date: \"2024-05-13\", desktop: { view: 197 }, mobile: { view: 160 } },\n  { date: \"2024-05-14\", desktop: { view: 448 }, mobile: { view: 490 } },\n  { date: \"2024-05-15\", desktop: { view: 473 }, mobile: { view: 380 } },\n  { date: \"2024-05-16\", desktop: { view: 338 }, mobile: { view: 400 } },\n  { date: \"2024-05-17\", desktop: { view: 499 }, mobile: { view: 420 } },\n  { date: \"2024-05-18\", desktop: { view: 315 }, mobile: { view: 350 } },\n  { date: \"2024-05-19\", desktop: { view: 235 }, mobile: { view: 180 } },\n  { date: \"2024-05-20\", desktop: { view: 177 }, mobile: { view: 230 } },\n  { date: \"2024-05-21\", desktop: { view: 82 }, mobile: { view: 140 } },\n  { date: \"2024-05-22\", desktop: { view: 81 }, mobile: { view: 120 } },\n  { date: \"2024-05-23\", desktop: { view: 252 }, mobile: { view: 290 } },\n  { date: \"2024-05-24\", desktop: { view: 294 }, mobile: { view: 220 } },\n  { date: \"2024-05-25\", desktop: { view: 201 }, mobile: { view: 250 } },\n  { date: \"2024-05-26\", desktop: { view: 213 }, mobile: { view: 170 } },\n  { date: \"2024-05-27\", desktop: { view: 420 }, mobile: { view: 460 } },\n  { date: \"2024-05-28\", desktop: { view: 233 }, mobile: { view: 190 } },\n  { date: \"2024-05-29\", desktop: { view: 78 }, mobile: { view: 130 } },\n  { date: \"2024-05-30\", desktop: { view: 340 }, mobile: { view: 280 } },\n  { date: \"2024-05-31\", desktop: { view: 178 }, mobile: { view: 230 } },\n  { date: \"2024-06-01\", desktop: { view: 178 }, mobile: { view: 200 } },\n  { date: \"2024-06-02\", desktop: { view: 470 }, mobile: { view: 410 } },\n  { date: \"2024-06-03\", desktop: { view: 103 }, mobile: { view: 160 } },\n  { date: \"2024-06-04\", desktop: { view: 439 }, mobile: { view: 380 } },\n  { date: \"2024-06-05\", desktop: { view: 88 }, mobile: { view: 140 } },\n  { date: \"2024-06-06\", desktop: { view: 294 }, mobile: { view: 250 } },\n  { date: \"2024-06-07\", desktop: { view: 323 }, mobile: { view: 370 } },\n  { date: \"2024-06-08\", desktop: { view: 385 }, mobile: { view: 320 } },\n  { date: \"2024-06-09\", desktop: { view: 438 }, mobile: { view: 480 } },\n  { date: \"2024-06-10\", desktop: { view: 155 }, mobile: { view: 200 } },\n  { date: \"2024-06-11\", desktop: { view: 92 }, mobile: { view: 150 } },\n  { date: \"2024-06-12\", desktop: { view: 492 }, mobile: { view: 420 } },\n  { date: \"2024-06-13\", desktop: { view: 81 }, mobile: { view: 130 } },\n  { date: \"2024-06-14\", desktop: { view: 426 }, mobile: { view: 380 } },\n  { date: \"2024-06-15\", desktop: { view: 307 }, mobile: { view: 350 } },\n  { date: \"2024-06-16\", desktop: { view: 371 }, mobile: { view: 310 } },\n  { date: \"2024-06-17\", desktop: { view: 475 }, mobile: { view: 520 } },\n  { date: \"2024-06-18\", desktop: { view: 107 }, mobile: { view: 170 } },\n  { date: \"2024-06-19\", desktop: { view: 341 }, mobile: { view: 290 } },\n  { date: \"2024-06-20\", desktop: { view: 408 }, mobile: { view: 450 } },\n  { date: \"2024-06-21\", desktop: { view: 169 }, mobile: { view: 210 } },\n  { date: \"2024-06-22\", desktop: { view: 317 }, mobile: { view: 270 } },\n  { date: \"2024-06-23\", desktop: { view: 480 }, mobile: { view: 530 } },\n  { date: \"2024-06-24\", desktop: { view: 132 }, mobile: { view: 180 } },\n  { date: \"2024-06-25\", desktop: { view: 141 }, mobile: { view: 190 } },\n  { date: \"2024-06-26\", desktop: { view: 434 }, mobile: { view: 380 } },\n  { date: \"2024-06-27\", desktop: { view: 448 }, mobile: { view: 490 } },\n  { date: \"2024-06-28\", desktop: { view: 149 }, mobile: { view: 200 } },\n  { date: \"2024-06-29\", desktop: { view: 103 }, mobile: { view: 160 } },\n  { date: \"2024-06-30\", desktop: { view: 446 }, mobile: { view: 400 } },\n]\n\nconst chartConfig = {\n  view: {\n    label: \"Page Views\",\n  },\n  desktop: {\n    label: \"Desktop\",\n    color: \"var(--chart-1)\",\n  },\n  mobile: {\n    label: \"Mobile\",\n    color: \"var(--chart-2)\",\n  },\n} satisfies ChartConfig\n\nconst BarChartInteractive = () => {\n  const isMobile = useIsMobile()\n\n  const numTicks = () => {\n    if (isMobile()) {\n      return 4\n    }\n    return 9\n  }\n\n  const [activeChart, setActiveChart] =\n    createSignal<keyof typeof chartConfig>(\"desktop\")\n\n  const keys = createMemo(() =>\n    // @ts-expect-error\n\n    Object.keys(data[0][activeChart()]).map((i) => ({ view: i })),\n  )\n\n  const y = createMemo(() =>\n    // @ts-expect-error\n    // eslint-disable-next-line solid/reactivity\n    keys().map((i) => (d: DataRecord) => d[activeChart()][i.view]),\n  )\n\n  const total = createMemo(() => ({\n    desktop: data.reduce((acc, curr) => acc + curr.desktop.view, 0),\n    mobile: data.reduce((acc, curr) => acc + curr.mobile.view, 0),\n  }))\n\n  return (\n    <Card class=\"py-0\">\n      <CardHeader class=\"flex flex-col items-stretch border-b !p-0 sm:flex-row\">\n        <div class=\"flex flex-1 flex-col justify-center gap-1 px-6 pb-3 pt-4 sm:!py-0\">\n          <CardTitle>Bar Chart - Interactive</CardTitle>\n          <CardDescription>\n            Showing total visitors for the last 3 months\n          </CardDescription>\n        </div>\n        <div class=\"flex\">\n          <For each={[\"desktop\", \"mobile\"]}>\n            {(key) => {\n              const chart = key as keyof typeof chartConfig\n              return (\n                <button\n                  type=\"button\"\n                  data-active={activeChart() === chart}\n                  class=\"data-[active=true]:bg-muted/50 relative z-30 flex flex-1 flex-col justify-center gap-1 border-t px-6 py-4 text-left even:border-l sm:border-l sm:border-t-0 sm:px-8 sm:py-6\"\n                  onClick={() => setActiveChart(chart)}\n                >\n                  <span class=\"text-muted-foreground text-xs\">\n                    {chartConfig[chart].label}\n                  </span>\n                  <span class=\"text-lg font-bold leading-none sm:text-3xl\">\n                    {total()[key as keyof typeof total]}\n                  </span>\n                </button>\n              )\n            }}\n          </For>\n        </div>\n      </CardHeader>\n      <CardContent class=\"px-2 sm:p-6\">\n        <ChartContainer\n          config={chartConfig}\n          type=\"xy\"\n          data={data}\n          class=\"aspect-auto\"\n          height={250}\n          width={\"100%\"}\n          yDomain={[0, Math.max(...data.map((d) => d.mobile.view + 50))]}\n        >\n          <VisStackedBar<DataRecord>\n            x={(_, i) => i}\n            y={y()}\n            color={`var(--color-${activeChart()})`}\n            barPadding={0.2}\n          />\n          <VisAxis<DataRecord>\n            type=\"x\"\n            tickFormat={(d) => {\n              const date = new Date(data[d as number].date)\n              return date.toLocaleDateString(\"en-US\", {\n                month: \"short\",\n                day: \"numeric\",\n              })\n            }}\n            gridLine={false}\n            tickLine={false}\n            domainLine={false}\n            numTicks={numTicks()}\n          />\n          <VisTooltip\n            triggers={{\n              [StackedBar.selectors.bar]: (d: DataRecord, x) => {\n                const container = document.createElement(\"div\")\n                const Component = () => (\n                  <ChartTooltipContent<Partial<DataRecord>, typeof chartConfig>\n                    data={{\n                      date: d.date,\n                      // @ts-expect-error\n                      [activeChart()]: d[activeChart()],\n                    }}\n                    x={x}\n                    config={chartConfig}\n                    labelKey=\"view\"\n                    nameKey=\"view\"\n                    labelFormatter={() =>\n                      new Date(d.date).toLocaleDateString(\"en-US\", {\n                        month: \"short\",\n                        day: \"numeric\",\n                        year: \"numeric\",\n                      })\n                    }\n                  />\n                )\n                render(() => <Component />, container)\n                return container.innerHTML\n              },\n            }}\n          />\n        </ChartContainer>\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default BarChartInteractive\n",
      "type": "registry:block"
    }
  ]
}