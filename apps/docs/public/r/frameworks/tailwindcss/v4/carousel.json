{
  "$schema": "https://shadcn-solid.com/schema/registry-item.json",
  "name": "carousel",
  "type": "registry:ui",
  "dependencies": [
    "embla-carousel-solid"
  ],
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "src/ui/v4/carousel.tsx",
      "content": "import type {\n  Accessor,\n  ComponentProps,\n  Setter,\n  ValidComponent,\n  VoidProps,\n} from \"solid-js\"\nimport {\n  createContext,\n  createEffect,\n  mergeProps,\n  onCleanup,\n  onMount,\n  splitProps,\n  useContext,\n} from \"solid-js\"\nimport { createStore } from \"solid-js/store\"\nimport type { PolymorphicProps } from \"@kobalte/core/polymorphic\"\nimport type { CreateEmblaCarouselType } from \"embla-carousel-solid\"\nimport createEmblaCarousel from \"embla-carousel-solid\"\n\nimport { cx } from \"@repo/tailwindcss/utils/cva\"\n\nimport type { ButtonProps } from \"./button\"\nimport { Button } from \"./button\"\n\ntype CarouselAPI = CreateEmblaCarouselType[1]\ntype CreateCarouselParameters = Parameters<typeof createEmblaCarousel>\ntype CarouselOptions = CreateCarouselParameters[0]\ntype CarouselPlugin = CreateCarouselParameters[1]\n\nexport interface CarouselOptionsProps {\n  options?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setAPI?: Setter<CarouselAPI>\n}\n\nexport type CarouselProps = ComponentProps<\"div\"> & CarouselOptionsProps\n\ntype CarouselContextProps = {\n  ref: ReturnType<typeof createEmblaCarousel>[0]\n  api: ReturnType<typeof createEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: Accessor<boolean>\n  canScrollNext: Accessor<boolean>\n} & CarouselOptionsProps\n\nconst CarouselContext = createContext<CarouselContextProps | null>(null)\n\nconst useCarousel = () => {\n  const context = useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nexport const Carousel = (props: CarouselProps) => {\n  const merge = mergeProps<CarouselProps[]>(\n    {\n      orientation: \"horizontal\",\n    },\n    props,\n  )\n  const [, rest] = splitProps(merge, [\n    \"orientation\",\n    \"options\",\n    \"setAPI\",\n    \"plugins\",\n    \"class\",\n    \"children\",\n  ])\n\n  const [ref, api] = createEmblaCarousel(\n    () => ({\n      ...props.options?.(),\n      axis: props.orientation === \"horizontal\" ? \"x\" : \"y\",\n    }),\n    () => props.plugins?.() ?? [],\n  )\n\n  const [store, setStore] = createStore({\n    canScrollNext: false,\n    canScrollPrev: false,\n  })\n\n  const onSelect = (api: CarouselAPI) => {\n    if (!api()) return\n    setStore({\n      canScrollNext: api()!.canScrollNext(),\n      canScrollPrev: api()!.canScrollPrev(),\n    })\n  }\n\n  const scrollPrev = () => {\n    api()?.scrollPrev()\n  }\n\n  const scrollNext = () => {\n    api()?.scrollNext()\n  }\n\n  const handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === \"ArrowLeft\") {\n      event.preventDefault()\n      scrollPrev()\n    } else if (event.key === \"ArrowRight\") {\n      event.preventDefault()\n      scrollNext()\n    }\n  }\n\n  onMount(() => {\n    if (!api() || !props.setAPI) return\n    // @ts-expect-error - api should be defined\n    props.setAPI(api)\n  })\n\n  createEffect(() => {\n    if (!api()) return\n    onSelect(api)\n    api()!.on(\"reInit\", (api) => {\n      onSelect(() => api)\n    })\n    api()!.on(\"select\", (api) => {\n      onSelect(() => api)\n    })\n\n    onCleanup(() => {\n      api()!.off(\"select\", (api) => {\n        onSelect(() => api)\n      })\n    })\n  })\n\n  const value: CarouselContextProps = {\n    ref,\n    api,\n    canScrollPrev: () => store.canScrollPrev,\n    get options() {\n      return props.options\n    },\n    canScrollNext: () => store.canScrollNext,\n    get orientation() {\n      return (\n        props.orientation ??\n        (props.options?.().axis === \"y\" ? \"vertical\" : \"horizontal\")\n      )\n    },\n    get plugins() {\n      return props.plugins\n    },\n    scrollNext,\n    scrollPrev,\n    get setAPI() {\n      return props.setAPI\n    },\n  }\n\n  return (\n    <CarouselContext.Provider value={value}>\n      <div\n        onKeyDown={handleKeyDown}\n        class={cx(\"relative\", props.class)}\n        role=\"region\"\n        aria-roledescription=\"carousel\"\n        data-slot=\"carousel\"\n        {...rest}\n      >\n        {props.children}\n      </div>\n    </CarouselContext.Provider>\n  )\n}\n\nexport type CarouselContentProps = ComponentProps<\"div\">\n\nexport const CarouselContent = (props: CarouselContentProps) => {\n  const { ref, orientation } = useCarousel()\n  const [, rest] = splitProps(props, [\"class\"])\n\n  return (\n    <div ref={ref} class=\"overflow-hidden\" data-slot=\"carousel-content\">\n      <div\n        class={cx(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          props.class,\n        )}\n        {...rest}\n      />\n    </div>\n  )\n}\n\nexport type CarouselItemProps = ComponentProps<\"div\">\n\nexport const CarouselItem = (props: CarouselItemProps) => {\n  const { orientation } = useCarousel()\n  const [, rest] = splitProps(props, [\"class\"])\n\n  return (\n    <div\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      data-slot=\"carousel-item\"\n      class={cx(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        props.class,\n      )}\n      {...rest}\n    />\n  )\n}\n\nexport type CarouselNextProps<T extends ValidComponent = \"button\"> = VoidProps<\n  ButtonProps<T>\n>\n\nexport const CarouselNext = <T extends ValidComponent = \"button\">(\n  props: PolymorphicProps<T, CarouselNextProps<T>>,\n) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n  const merge = mergeProps<CarouselNextProps[]>(\n    {\n      variant: \"outline\",\n      size: \"icon\",\n    },\n    props as CarouselNextProps,\n  )\n  const [, rest] = splitProps(merge, [\"class\", \"variant\", \"size\"])\n\n  return (\n    <Button\n      data-slot=\"carousel-next\"\n      variant={props.variant}\n      size={props.size}\n      class={cx(\n        \"absolute size-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        props.class,\n      )}\n      disabled={!canScrollNext()}\n      onClick={scrollNext}\n      {...rest}\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"size-4\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          stroke-width=\"2\"\n          d=\"M5 12h14m-7-7l7 7l-7 7\"\n        />\n      </svg>\n    </Button>\n  )\n}\n\nexport type CarouselPreviousProps<T extends ValidComponent = \"button\"> =\n  VoidProps<ButtonProps<T>>\n\nexport const CarouselPrevious = <T extends ValidComponent = \"button\">(\n  props: PolymorphicProps<T, CarouselPreviousProps<T>>,\n) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n  const merge = mergeProps<CarouselPreviousProps[]>(\n    {\n      variant: \"outline\",\n      size: \"icon\",\n    },\n    props as CarouselPreviousProps,\n  )\n  const [, rest] = splitProps(merge, [\"class\", \"variant\", \"size\"])\n\n  return (\n    <Button\n      data-slot=\"carousel-previous\"\n      variant={props.variant}\n      size={props.size}\n      class={cx(\n        \"absolute size-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        props.class,\n      )}\n      disabled={!canScrollPrev()}\n      onClick={scrollPrev}\n      {...rest}\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        class=\"size-4\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          stroke-width=\"2\"\n          d=\"m12 19l-7-7l7-7m7 7H5\"\n        />\n      </svg>\n    </Button>\n  )\n}\n",
      "type": "registry:ui"
    }
  ]
}